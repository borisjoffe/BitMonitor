!!! 5
html
	head
		meta(charset='utf-8')
		meta(name='viewport', content='width=device-width, initial-scale=1.0, maximum-scale=1.0')
		meta(name='description', content='Tizen basic template generated by Tizen Web IDE')
		title BitMonitor
		link(rel='stylesheet', type='text/css', href='css/style.css')
		- var simDir = 'file:///home/boris/code/tizen-sdk/tools/websimultator/web';
		- var simDir = '../../tizen-sdk/tools/websimulator/web/';
		- var simDir = 'web/';
		- var ripplejsFile = simDir + 'ripple.js';
		- var phonemodelFile = simDir + 'phoneModel.js';
		//script(src=phonemodelFile)
		//script(src=ripplejsFile)
		script(src='http://code.jquery.com/jquery-1.10.2.min.js')
		script(src='js/main.js')
		
	body
		header
			hgroup
				h1 BitMonitor
				h2 Tizen app that tracks btc prices on exchanges and notifies you when the price reaches a certain level.
		nav
			ul
				li
					a(href='#') Home
				li
					a(href='#') About Us
				//-
					li
						a(href='#') Contact Us
		article
			header
				h1
					img(src='images/tizen_32.png', width='32')
					| BitMonitor
			//-
				p
					| This is an empty template of Tizen Web Application&period; Tizen will support multiple device categories&colon;
			ul
				li
					label Coinbase Sell Price:
					| &nbsp;
					span#coinbasePrice 

			br
			input(type="submit" value="Reload price" id="btn")
			//input(type="submit" onclick="handleData" id="btn" value="Reload price") Reload

			// Cross origin requests using JSONP
			script.
				function $(el) { return document.getElementById(el); }

				function handleData(data) {
					var price = data['subtotal']['amount'];
					$('coinbasePrice').innerHTML = price;
				}

				/* $.ready(function() {
					$.getJSON('https://coinbase.com/api/v1/prices/sell?callback=handleData');
					function handleData(data) {
						var price = data['subtotal']['amount'];
						$('#coinbasePrice').val(price);
						alert(price);
					}
				}); */
				myCode = function() {}
				window.addEventListener('load', function() {
					$('btn').addEventListener('click', function() {
						loadScript("https://coinbase.com/api/v1/prices/sell?callback=handleData", myCode);
					}, false);
				}, true);

				function loadScript(url, callback) {
				// adding the script tag to the head as suggested before
					var head = document.getElementsByTagName('head')[0];
					var script = document.createElement('script');
					script.type = 'text/javascript';
					script.src = url;

					// then bind the event to the callback function 
					// there are several events for cross browser compatibility
					script.onreadystatechange = callback;
					script.onload = callback;

					// fire the loading
					head.appendChild(script);
				}

			script(src="https://coinbase.com/api/v1/prices/sell?callback=handleData")


			//-
				section
					p This is a basic section of a document&period;
					p The following button displays a time using JavaScript&period;
					#divbutton1
						button(onclick='startTime();') Clock
		footer
			p &copy; 2012 BitMonitor&period; All rights reserved&period;
